{% extends 'layout.html' %}

{% block title %}
    Time In
{% endblock %}

{% block content %}
    <div class="px-96 pt-10">
        <form action="{% url 'employees:employee-log' %}" method="post" id="employeeLogForm">
        {% csrf_token %}
            <div>
                <label for="time_in" class="block text-sm font-medium text-gray-700">Time In</label>
                <input type="datetime-local" id="time_in" name="time_in" value="{{ login_time }}"
                       class="form-input mt-1 block w-full rounded border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
               required readonly>
            </div>
            <div>
                <label for="time_out" class="block text-sm font-medium text-gray-700">Time Out</label>
                <input type="datetime-local" id="time_out" name="time_out" value="{{ logout_time }}"
                       class="form-input mt-1 block w-full rounded border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
               required readonly>
            </div>
            <button type="submit"
                    class="w-full bg-indigo-600 text-white py-2 px-4 mt-5 rounded hover:bg-indigo-700 disabled:bg-gray-500" 
                    {% if log_type == 'Today Logs' %}
                        disabled
                    {% endif %}
                    >
                {{ log_type }}
            </button>
        </form>
    </div>

    <script>
        // Set the default value of the datetime-local input to the current date and time
        {% comment %} document.addEventListener("DOMContentLoaded", function () {
            const dateTimeInput = document.getElementById("time_in");
            const now = new Date();

            // Format the date and time as YYYY-MM-DDTHH:mm for datetime-local input
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0'); // Months are zero-based
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');

            const formattedDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
            dateTimeInput.value = formattedDateTime;
        }); {% endcomment %}
    </script>
{% endblock %}